local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/SynioxStudios/ByYusufGui-Syniox/refs/heads/main/SynioxGui.lua%20(3).txt", true))()
local displayName = game.Players.LocalPlayer.DisplayName

local window = library:AddWindow("Deneme -1|| HELLO - ".. displayName, {
    title_bar = {
        Color3.fromRGB(160, 0, 0), 
        Color3.fromRGB(40, 0, 0),  
        Color3.fromRGB(0, 0, 0)    
    }, 
    title_bar_transparency = 0.1, 
    background = {
        Color3.fromRGB(0, 0, 0), 
        Color3.fromRGB(10, 10, 10), 
        Color3.fromRGB(20, 20, 20)
    }, 
    background_transparency = 0.1, 
    main_color = Color3.fromRGB(160, 0, 0), 
    min_size = Vector2.new(400, 450), 
    can_resize = true 
})

local tabFarming = window:AddTab("Pack Farm")

local player = game.Players.LocalPlayer
local muscleEvent = player:WaitForChild("muscleEvent")
local VIM = game:GetService("VirtualInputManager")
local runFastRep = false
local autoEatEnabled = false
local fastRebirth = false

local function getPing()
    local stats = game:GetService("Stats")
    local pingStat = stats:FindFirstChild("PerformanceStats") and stats.PerformanceStats:FindFirstChild("Ping")
    return pingStat and pingStat:GetValue() or 0
end

local function fastRepLoop()
    while runFastRep do
        if muscleEvent then
            for i = 1, 3 do
                muscleEvent:FireServer("rep")
            end
        end
        task.wait(0.25)
        if getPing() >= 150 then task.wait(0.5) end
    end
end

local function pressE()
    VIM:SendKeyEvent(true, "E", false, game)
    task.wait(0.1)
    VIM:SendKeyEvent(false, "E", false, game)
end

local function unequipAllPets()
    for _, folder in pairs(player.petsFolder:GetChildren()) do
        if folder:IsA("Folder") then
            for _, pet in pairs(folder:GetChildren()) do
                game:GetService("ReplicatedStorage").rEvents.equipPetEvent:FireServer("unequipPet", pet)
            end
        end
    end
    task.wait(0.1)
end

local function equipPetByName(name)
    unequipAllPets()
    task.wait(0.01)
    for _, pet in pairs(player.petsFolder.Unique:GetChildren()) do
        if pet.Name == name then
            game:GetService("ReplicatedStorage").rEvents.equipPetEvent:FireServer("equipPet", pet)
        end
    end
end

tabFarming:AddLabel("Fast Farming").TextSize = 23

tabFarming:AddSwitch("Fast Strength (12 CPS)", function(state)
    runFastRep = state
    if runFastRep then task.spawn(fastRepLoop) end
end)

tabFarming:AddLabel("Fast Rebirths").TextSize = 23

local footerTimeLabel = tabFarming:AddLabel("0d 0h 0m 0s")
local footerRebirthsLabel = tabFarming:AddLabel("Rebirths: 0")
local footerRebirthsGainedLabel = tabFarming:AddLabel("Rebirths Gained: 0")

local startTime = tick()
local initialRebirths = player:WaitForChild("leaderstats"):WaitForChild("Rebirths").Value

task.spawn(function()
    while true do
        local elapsed = tick() - startTime
        local d = math.floor(elapsed / 86400)
        local h = math.floor((elapsed % 86400) / 3600)
        local m = math.floor((elapsed % 3600) / 60)
        local s = math.floor(elapsed % 60)
        footerTimeLabel.Text = string.format("%dd %dh %dm %ds", d, h, m, s)
        task.wait(1)
    end
end)

local function updateRebirths()
    local current = player.leaderstats.Rebirths.Value
    local gained = current - initialRebirths
    footerRebirthsLabel.Text = "Rebirths: " .. current
    footerRebirthsGainedLabel.Text = "Rebirths Gained: " .. gained
end
player.leaderstats.Rebirths.Changed:Connect(updateRebirths)

tabFarming:AddSwitch("Auto Fast Rebirth", function(bool)
    fastRebirth = bool
    if fastRebirth then
        task.spawn(function()
            local rs = game:GetService("ReplicatedStorage")
            while fastRebirth do
                local reb = player.leaderstats.Rebirths.Value
                local neededStr = 10000 + (5000 * reb)
                if player.ultimatesFolder:FindFirstChild("Golden Rebirth") then
                    neededStr = math.floor(neededStr * (1 - (player.ultimatesFolder["Golden Rebirth"].Value * 0.1)))
                end
                
                equipPetByName("Swift Samurai")
                while player.leaderstats.Strength.Value < neededStr and fastRebirth do
                    for _ = 1, 10 do player.muscleEvent:FireServer("rep") end
                    task.wait()
                end
                
                equipPetByName("Tribal Overlord")
                local machine = workspace.machinesFolder:FindFirstChild("Jungle Bar Lift")
                if machine and machine:FindFirstChild("interactSeat") then
                    player.Character.HumanoidRootPart.CFrame = machine.interactSeat.CFrame * CFrame.new(0, 3, 0)
                    repeat task.wait(0.1) pressE() until player.Character.Humanoid.Sit or not fastRebirth
                end
                
                local before = player.leaderstats.Rebirths.Value
                repeat rs.rEvents.rebirthRemote:InvokeServer("rebirthRequest") task.wait(0.1) until player.leaderstats.Rebirths.Value > before or not fastRebirth
            end
        end)
    end
end)

tabFarming:AddLabel("Complements").TextSize = 23

tabFarming:AddSwitch("Jungle Lift", function(bool)
    getgenv().working = bool
    if bool then
        local char = player.Character
        if char and char:FindFirstChild("HumanoidRootPart") then
            char.HumanoidRootPart.CFrame = CFrame.new(-8666, 34, 2070)
            task.wait(0.1)
            pressE()
            task.spawn(function()
                while getgenv().working do
                    player.muscleEvent:FireServer("rep")
                    task.wait()
                end
            end)
        end
    end
end)

tabFarming:AddSwitch("Lock Position", function(Value)
    if Value then
        local currentPos = player.Character.HumanoidRootPart.CFrame
        getgenv().posLock = game:GetService("RunService").Heartbeat:Connect(function()
            if player.Character:FindFirstChild("HumanoidRootPart") then
                player.Character.HumanoidRootPart.CFrame = currentPos
            end
        end)
    else
        if getgenv().posLock then getgenv().posLock:Disconnect() getgenv().posLock = nil end
    end
end)

tabFarming:AddSwitch("Auto Eat Egg 30 Min", function(state)
    autoEatEnabled = state
end)

task.spawn(function()
    while true do
        if autoEatEnabled then
            local bp = player:WaitForChild("Backpack")
            local egg = bp:FindFirstChild("Protein Egg")
            if egg then
                egg.Parent = player.Character
                pcall(function() egg:Activate() end)
            end
            task.wait(1800)
        else
            task.wait(1)
        end
    end
end)

tabFarming:AddButton("Full Optimization", function()
    for _, gui in pairs(player.PlayerGui:GetChildren()) do
        if gui:IsA("ScreenGui") and gui.Name ~= "Pack Farm" then gui.Enabled = false end
    end
    game:GetService("Lighting").Brightness = 0
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("ParticleEmitter") or obj:IsA("Light") then obj:Destroy() end
    end
end)

tabFarming:AddSwitch("Hide All Frames", function(bool)
    for _, obj in pairs(game:GetService("ReplicatedStorage"):GetChildren()) do
        if obj.Name:match("Frame$") then obj.Visible = not bool end
    end
end)
